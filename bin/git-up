#!/bin/sh

function is_git_dir () {
    [ -d .git ] || [ "$(git rev-parse --is-inside-work-tree 2>/dev/null)" == "true" ]
}

function is_git_p4_dir () {
    is_git_dir && git log HEAD~10..HEAD | grep -q '\[git-p4\:'
}

if is_git_p4_dir; then
   git p4 rebase $*
else
   git pull --rebase $*
fi
