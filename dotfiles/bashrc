#!/usr/bin/env bash
# for syntax highlightling in emacs, mostly

export LOAD_COMPOSED_FUNCTIONS=0
BOOTSTRAP=$HOME/.bashrc.d/bootstrap
source $BOOTSTRAP 2>/dev/null || \
    echo ERROR: Unable to find $BOOTSTRAP >> /dev/stderr

# turn monitor mode OFF and
# suppress "[#] Done  /foo/bar" messages
set +o monitor

# no more annoying !
set +H

if [[ "$TERM" = "dumb" ]] ; then
  export TERM=xterm
fi

# finally, load all my bash customizations
if [[ -e "$HOME/.bashrc.d" ]]; then
    SCRIPTS=$(find "$HOME/.bashrc.d/enabled" -name "*.sh" -print | sort)
    for SCRIPT in $SCRIPTS; do
        source_file $SCRIPT
    done
fi
restore_cursor_clear_line

if function_exists unshift_path; then
    # add dirs to the FRONT of the PATH
    unshift_path /usr/local/sbin
    unshift_path /usr/local/bin
    unshift_path /usr/local/opt/findutils/libexec/gnubin
    unshift_path $HOME/bin
else
    (>&2 echo "Unable to add directories to front of path; unshift_path() not loaded")
fi

if function_exists uniq_path; then
    uniq_path # remove any duplicates in the PATH
else
    (>&2 echo "Unable to remove duplicate directories from path; uniq_path() not loaded")    
fi
